# Git artifact

https://github.com/drevops/git-artifact

> Package and push files to remote repositories

Some hosting providers, like Acquia, restrict certain build operations, making
it necessary to develop and build your site elsewhere before deploying it. This
tool streamlines that process: it uses a `.gitignore.artifact` file to control
which files get transferred, and overwrites the destination repository's history
with each push, while preserving the source history.

**Vortex** comes
with [pre-configured `.gitignore.artifact`](https://github.com/drevops/vortex/blob/develop/.gitignore.artifact)
file and [deployment script](https://github.com/drevops/vortex/blob/develop/scripts/vortex/deploy-artifact.sh)
to build the artifact in continuous integration pipeline and push it to the
remote repository in Acquia.

## Usage

This tool is used in continuous integration pipeline and does not require any
manual actions.

## Configuration

The deployment targets can be added to the `.gitignore.artifact` file: it will
replace the standard `.gitignore` file in the artifact repository.

The file already contains all required targets to get the full site build with
production-only dependencies (dev-dependencies are excluded from the code
artifact during the continuous integration pipeline build).

Modifying targets in the `.gitignore.artifact` file works just like updating
a regular `.gitignore` file.

It is required to set the following environment variables in the continuous
integration environment:

- `VORTEX_DEPLOY_ARTIFACT_GIT_USER_NAME`: Email address of the user who will be
  committing to a remote repository.
- `VORTEX_DEPLOY_ARTIFACT_GIT_USER_EMAIL`: Name of the user who will be
  committing to a remote repository.
