---
sidebar_label: Docker
sidebar_position: 5
---

# Docker deployment

Docker deployment builds container images and pushes them to a remote
container registry.

## How it works

When `docker` is included in `$VORTEX_DEPLOY_TYPES`, the deployment script:

1. Builds Docker images for your services using `docker-compose.yml`
2. Tags images with the deployment reference (branch, tag, or commit)
3. Pushes images to the configured container registry
4. The hosting platform pulls and deploys the new images

## Configuration

### Environment variables

| Variable | Required | Default | Location | Description |
|----------|----------|---------|----------|-------------|
| `VORTEX_DEPLOY_CONTAINER_REGISTRY` | **Yes** | | `.env` | Registry URL (e.g., `docker.io`, `ghcr.io`) |
| `VORTEX_DEPLOY_CONTAINER_REGISTRY_USER` | **Yes** | | CI | Registry username |
| `VORTEX_DEPLOY_CONTAINER_REGISTRY_PASS` | **Yes** | | CI | Registry password or token |
| `VORTEX_DEPLOY_CONTAINER_REGISTRY_IMAGE` | No | Project name | `.env` | Base image name |

### Setup

1. Add `docker` to the `VORTEX_DEPLOY_TYPES` variable in your `.env` file:

   ```shell title=".env"
   VORTEX_DEPLOY_TYPES=docker
   ```

2. Configure your container registry:

   ```shell title=".env"
   VORTEX_DEPLOY_CONTAINER_REGISTRY=ghcr.io
   VORTEX_DEPLOY_CONTAINER_REGISTRY_IMAGE=your-org/your-project
   ```

3. Add registry credentials to your CI provider's environment variables:

   ```shell
   VORTEX_DEPLOY_CONTAINER_REGISTRY_USER=your-username
   VORTEX_DEPLOY_CONTAINER_REGISTRY_PASS=your-token
   ```

## Image tagging

Images are tagged based on the deployment context:

| Context | Tag format | Example |
|---------|-----------|---------|
| Branch | Branch name (sanitized) | `develop`, `feature-auth` |
| Tag | Tag name | `1.0.0`, `v2.1.0` |
| PR | `pr-{number}` | `pr-123` |
| Commit | Short SHA | `abc1234` |

## Supported registries

- **Docker Hub** (`docker.io`)
- **GitHub Container Registry** (`ghcr.io`)
- **AWS ECR** (`*.dkr.ecr.*.amazonaws.com`)
- **Google Container Registry** (`gcr.io`)
- **Azure Container Registry** (`*.azurecr.io`)
- Any OCI-compliant registry

## Use cases

- **Kubernetes deployments** - Pull images from registry to deploy
- **Container orchestration platforms** - AWS ECS, Google Cloud Run, etc.
- **Custom infrastructure** - Any system that can pull and run Docker images

## See also

- [Docker tool](/docs/tools/docker) - Docker configuration in Vortex
