---
sidebar_position: 5
---

# Release

## Versioning Strategy

Vortex uses [Semantic Versioning](https://semver.org/) for releases: `MAJOR.MINOR.PATCH`

### Semantic version (MAJOR.MINOR.PATCH)

- **MAJOR**: Breaking changes that require migration or significant updates
- **MINOR**: New features, backward compatible
- **PATCH**: Bug fixes, backward compatible

### Version examples

- `1.0.0` - First major release
- `1.1.0` - New features added
- `1.1.1` - Bug fix release
- `2.0.0` - Breaking changes

### Version numbering guidelines

When creating a new release, determine the version based on the changes:

1. **Bump MAJOR** when making incompatible breaking changes:
   - Removing features or configuration options
   - Changing default behavior that breaks existing projects
   - Updating to new major versions of services or dependencies that require migration

2. **Bump MINOR** when adding functionality in a backward compatible manner:
   - Adding new optional features
   - Adding new scripts or commands
   - Enhancing existing features without breaking changes

3. **Bump PATCH** when making backward compatible bug fixes:
   - Fixing bugs or errors
   - Security patches
   - Documentation updates
   - Minor improvements that don't change functionality

### Branch strategy

- **`main`** - Current stable release branch (always the latest major version)
- **`project/X.x`** - Development branch for the next major version (e.g., `project/2.x`)
- **`X.x`** - Maintenance branches for older major versions (e.g., `1.x` after `2.x` is released)

When a new major version is ready:
1. The next major version development in `project/X.x` is merged into `main`
2. The previous major version code is preserved in its own `X.x` branch for maintenance

:::note

Vortex uses **GitHub Flow** with the `main` branch always containing the latest major version.

Consumer projects created from Vortex should continue to use Git Flow.

:::

## Release Process

Follow the steps below to release a new version of the Vortex:

1. Run renovate bot locally to update all dependencies outside of the schedule:
```
renovate --schedule= --force-cli=true drevops/vortex
```
2. Update container images to the latest versions and check that `@see` links are working.
3. Update PHP version in `composer.json` for `config.platform`.
4. Update PHP version in `phpcs.xml` for `testVersion`.
5. Update PHP version in `phpstan.neon` for `phpVersion`. Run `php -r "echo PHP_VERSION_ID . PHP_EOL;"` in the container to get the current PHP version.
6. Increment minor version of all packages in `composer.json`. Run `composer update -W && composer bump`.
7. Update minor version of dependencies in theme's `package.json`.
8. Increment the cache version in `.circleci/config.yml` and `.github/workflows/build-test-deploy.yml`.
9. Updated documentation with `cd .vortex && ahoy update-docs`.
10. Update installer video with `cd .vortex && ahoy update-installer-video`.
11. Create new release notes using release template:

import CodeBlock from '@theme/CodeBlock';
import ReleaseTemplate from '!!raw-loader!./_release_template.md'

<CodeBlock language="markdown">{ReleaseTemplate}</CodeBlock>
