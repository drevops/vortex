---
sidebar_label: Notifications
sidebar_position: 4
---

# Notifications

**Vortex** provides a flexible notification system that sends updates
across multiple channels.

Notifications are triggered automatically during deployment to a
hosting environment, and can be configured to suit your team's
communication needs.

## Channels

Configure notification channels in your `.env` file:

```bash title=".env"
# Enable notification channels (comma-separated list)
VORTEX_NOTIFY_CHANNELS=email,slack,github
```

Available channels: [`email`](#email), [`github`](#github),
[`jira`](#jira), [`newrelic`](#new-relic), [`slack`](#slack),
[`webhook`](#webhook)

## Global environment variables

These variables apply to all notification channels unless overridden by
channel-specific settings.

| Variable                         | Required | Default           | Location | Description                                                                       |
|----------------------------------|----------|-------------------|----------|-----------------------------------------------------------------------------------|
| `VORTEX_NOTIFY_CHANNELS`         | No       | `email`           | `.env`   | Notification channels (comma-separated: email,slack,newrelic,github,jira,webhook) |
| `VORTEX_NOTIFY_PROJECT`          | No       | `VORTEX_PROJECT`  | `.env`   | Notification project name                                                         |
| `VORTEX_NOTIFY_BRANCH`           | No       |                   | Hosting  | Notification git branch name                                                      |
| `VORTEX_NOTIFY_PR_NUMBER`        | No       |                   | Hosting  | Notification pull request number (if applicable)                                  |
| `VORTEX_NOTIFY_SHA`              | No       |                   | Hosting  | Notification git commit SHA                                                       |
| `VORTEX_NOTIFY_ENVIRONMENT_URL`  | No       |                   | Hosting  | Notification deployment environment URL                                           |
| `VORTEX_NOTIFY_ENVIRONMENT_TYPE` | No       |                   | Hosting  | Notification environment type (production, uat, dev, pr)                          |
| `VORTEX_NOTIFY_EVENT`            | No       | `post_deployment` | Hosting  | Notification event type (pre_deployment or post_deployment)                       |
| `VORTEX_NOTIFY_SKIP`             | No       |                   | Hosting  | Notification skip flag (set to `1` to skip notifications)                         |

## Email

Send deployment notification via email.

### Setup

1. Add `VORTEX_NOTIFY_EMAIL_FROM` variable to `.env` file with the
   value of the email address that is allowed to be sent from your
   hosting.
2. Add `VORTEX_NOTIFY_EMAIL_RECIPIENTS` variable to `.env` file with a
   list of recipients in format
   `webmaster@your-site-domain.example|Webmaster` (comma-separated for
   multiple recipients).

### Environment variables

| Variable                         | Required | Default | Location | Description                                           |
|----------------------------------|----------|---------|----------|-------------------------------------------------------|
| `VORTEX_NOTIFY_EMAIL_FROM`       | **Yes**  |         | `.env`   | Email notification sender address                     |
| `VORTEX_NOTIFY_EMAIL_RECIPIENTS` | **Yes**  |         | `.env`   | Email notification recipients (format: `email\|name`) |

### Example

**Subject:**

```text
My Project deployment notification of "main" branch
```

**Body:**

```text
## This is an automated message ##

Site My Project "main" branch has been deployed at 15/01/2025
14:30:45 UTC and is available at https://example.com.

Login at: https://example.com/user/login
```

## GitHub

GitHub supports deployment statuses and environment links. **Vortex** can
automatically post deployment status to GitHub pull requests.

### Setup

1. [Create a GitHub personal access token](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens).
2. Add `VORTEX_NOTIFY_GITHUB_TOKEN` variable to your hosting
   provider's global environment variables.
3. Add `VORTEX_NOTIFY_GITHUB_REPOSITORY` variable to your hosting
   provider's global environment variables.

### Environment variables

| Variable                          | Required | Default | Location | Description                       |
|-----------------------------------|----------|---------|----------|-----------------------------------|
| `VORTEX_NOTIFY_GITHUB_TOKEN`      | **Yes**  |         | Hosting  | GitHub notification personal access token |
| `VORTEX_NOTIFY_GITHUB_REPOSITORY` | **Yes**  |         | Hosting  | GitHub notification repository in `owner/repo` format |

### Example

The pull request page in GitHub has information about the deployment
status.

![notification-github-before.png](/img/notification-github-before.png)

After deployment succeeds, a notification is posted to GitHub. You can use a
`View deployment` button to quickly access the deployed environment.

![notification-github-after.png](/img/notification-github-after.png)

## JIRA

Post a deployment comment and, optionally, update issue status and
assignee in JIRA.

### Setup

1. [Create a JIRA API token](https://support.atlassian.com/atlassian-account/docs/manage-api-tokens-for-your-atlassian-account/).
2. Add `VORTEX_NOTIFY_JIRA_TOKEN` variable to your hosting provider's
   global environment variables.
3. Add `VORTEX_NOTIFY_JIRA_USER` variable to `.env` file.
4. Add `VORTEX_NOTIFY_JIRA_ASSIGNEE` variable to `.env` file if you
   would like the issue to be assigned to this user once the deployment
   is complete.
5. Add `VORTEX_NOTIFY_JIRA_TRANSITION` variable to `.env` file with a
   transition name if you would like the issue to be transitioned to
   once the deployment is complete.
6. Optionally, modify the comment prefix by adding
   `VORTEX_NOTIFY_JIRA_COMMENT_PREFIX` variable to `.env` file.

### Environment variables

| Variable                            | Required | Default                      | Location | Description                              |
|-------------------------------------|----------|------------------------------|----------|------------------------------------------|
| `VORTEX_NOTIFY_JIRA_TOKEN`          | **Yes**  |                              | Hosting  | JIRA notification API token              |
| `VORTEX_NOTIFY_JIRA_USER`           | **Yes**  |                              | `.env`   | JIRA notification user email address     |
| `VORTEX_NOTIFY_JIRA_ASSIGNEE`       | No       |                              | `.env`   | JIRA notification assignee email         |
| `VORTEX_NOTIFY_JIRA_TRANSITION`     | No       |                              | `.env`   | JIRA notification state to transition to |
| `VORTEX_NOTIFY_JIRA_ENDPOINT`       | No       | `https://jira.atlassian.com` | `.env`   | JIRA notification API endpoint           |
| `VORTEX_NOTIFY_JIRA_COMMENT_PREFIX` | No       | `"Deployed to "`             | `.env`   | JIRA notification comment prefix         |

### Example

**Comment posted to JIRA issue:**

```text
Deployed to https://example.com
```

The environment URL is displayed as an inline card in JIRA.

## New Relic

[Deployment markers](https://docs.newrelic.com/docs/apm/apm-ui-pages/events/record-deployments/)
help you track code changes in New Relic APM by associating them with
application performance data. **Vortex** can automatically create deployment
markers in New Relic APM when a deployment is performed.

### Setup

1. [Create a New Relic API key](https://docs.newrelic.com/docs/apis/intro-apis/new-relic-api-keys/).
2. Add `VORTEX_NOTIFY_NEWRELIC_APIKEY` variable to your hosting
   provider's global environment variables.
3. Optionally, add other New Relic-related variables to your `.env`
   file to customize the notification.

### Environment variables

| Variable                             | Required | Default                              | Location | Description                                             |
|--------------------------------------|----------|--------------------------------------|----------|---------------------------------------------------------|
| `VORTEX_NOTIFY_NEWRELIC_APIKEY`      | **Yes**  |                                      | Hosting  | New Relic notification API key                          |
| `VORTEX_NOTIFY_NEWRELIC_PROJECT`     | No       | `VORTEX_NOTIFY_PROJECT`              | `.env`   | New Relic notification project name                     |
| `VORTEX_NOTIFY_NEWRELIC_APP_NAME`    | No       | `{PROJECT}-{BRANCH}`                 | `.env`   | New Relic notification application name                 |
| `VORTEX_NOTIFY_NEWRELIC_APPID`       | No       |                                      | `.env`   | New Relic notification application ID (auto-discovered) |
| `VORTEX_NOTIFY_NEWRELIC_DESCRIPTION` | No       | `"{branch} deployed"`                | `.env`   | New Relic notification deployment description           |
| `VORTEX_NOTIFY_NEWRELIC_CHANGELOG`   | No       | `VORTEX_NOTIFY_NEWRELIC_DESCRIPTION` | `.env`   | New Relic notification deployment changelog             |
| `VORTEX_NOTIFY_NEWRELIC_USER`        | No       | `Deployment robot`                   | `.env`   | New Relic notification user performing deployment       |
| `VORTEX_NOTIFY_NEWRELIC_ENDPOINT`    | No       | `https://api.newrelic.com/v2`        | `.env`   | New Relic notification API endpoint                     |

### Example

Deployment marker created in New Relic APM:

<img src="/img/notification-newrelic.png" alt="New Relic deployment marker" width="828"/>

## Slack

Post deployment notification to Slack a channel.

### Setup

1. [Create a Slack app and Incoming Webhook](https://api.slack.com/messaging/webhooks).
2. Add `VORTEX_NOTIFY_SLACK_WEBHOOK` variable to your hosting
   provider's global environment variables.
3. Optionally, add other Slack-related variables to your `.env` file to
   customize the notification.

### Environment variables

| Variable                         | Required | Default                 | Location | Description                                                   |
|----------------------------------|----------|-------------------------|----------|---------------------------------------------------------------|
| `VORTEX_NOTIFY_SLACK_WEBHOOK`    | **Yes**  |                         | Hosting  | Slack notification webhook URL                                |
| `VORTEX_NOTIFY_SLACK_PROJECT`    | No       | `VORTEX_NOTIFY_PROJECT` | `.env`   | Slack notification project name                               |
| `VORTEX_NOTIFY_SLACK_CHANNEL`    | No       |                         | `.env`   | Slack notification target channel (overrides webhook default) |
| `VORTEX_NOTIFY_SLACK_USERNAME`   | No       | `Deployment Bot`        | `.env`   | Slack notification bot display name                           |
| `VORTEX_NOTIFY_SLACK_ICON_EMOJI` | No       | `:rocket:`              | `.env`   | Slack notification bot icon emoji                             |

### Example

Notification posted to Slack channel using custom "VortexBot" Slack app:

<img src="/img/notification-slack.png" alt="Slack notification" width="528"/>

## Webhook

Send HTTP request to an arbitrary webhook URL.

### Setup

1. Add `VORTEX_NOTIFY_WEBHOOK_URL` variable to your `.env` file or
   hosting provider's global environment variables.
2. Optionally, add other webhook-related variables to your `.env` file
   to customize the notification.

### Environment variables

| Variable                                | Required | Default                          | Location          | Description                                 |
|-----------------------------------------|----------|----------------------------------|-------------------|---------------------------------------------|
| `VORTEX_NOTIFY_WEBHOOK_URL`             | **Yes**  |                                  | `.env` or Hosting | Webhook notification endpoint URL           |
| `VORTEX_NOTIFY_WEBHOOK_PROJECT`         | No       | `VORTEX_NOTIFY_PROJECT`          | Hosting           | Webhook notification project name           |
| `VORTEX_NOTIFY_WEBHOOK_METHOD`          | No       | `POST`                           | `.env`            | Webhook notification HTTP method            |
| `VORTEX_NOTIFY_WEBHOOK_HEADERS`         | No       | `Content-Type: application/json` | `.env`            | Webhook notification pipe-separated headers |
| `VORTEX_NOTIFY_WEBHOOK_PAYLOAD`         | No       | JSON with substitution variables | `.env`            | Webhook notification JSON payload           |
| `VORTEX_NOTIFY_WEBHOOK_RESPONSE_STATUS` | No       | `200`                            | `.env`            | Webhook notification expected HTTP status   |
